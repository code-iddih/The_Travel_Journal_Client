{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{Link,useHistory}from\"react-router-dom\";import{getEntry,deleteEntry}from\"../utils/api\";import TagList from\"./TagList\";import TagInput from\"./TagInput\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function EntryDetail(_ref){let{entryId}=_ref;const[entry,setEntry]=useState({id:null,location:\"\",date:\"\",description:\"\",tags:[]// Initialize as an empty array\n});const[isLoading,setIsLoading]=useState(true);const[error,setError]=useState(null);const history=useHistory();useEffect(()=>{const fetchEntry=async()=>{try{setIsLoading(true);const response=await getEntry(entryId);setEntry(response.data);setError(null);}catch(error){console.error(\"Error fetching entry:\",error);setError(\"Failed to load entry. Please try again.\");}finally{setIsLoading(false);}};fetchEntry();},[entryId]);const handleTagAdded=newTag=>{setEntry(prevEntry=>({...prevEntry,tags:prevEntry.tags?[...prevEntry.tags,newTag]:[newTag]}));};const handleDeleteEntry=async()=>{if(window.confirm(\"Are you sure you want to delete this entry?\")){try{await deleteEntry(entry.id);history.push(\"/\");}catch(error){console.error(\"Error deleting entry:\",error);setError(\"Failed to delete entry. Please try again.\");}}};if(isLoading)return/*#__PURE__*/_jsx(\"div\",{className:\"text-center\",children:\"Loading...\"});if(error)return/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-danger\",children:error});if(!entry)return/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-warning\",children:\"Entry not found.\"});return/*#__PURE__*/_jsx(\"div\",{className:\"card\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"card-title\",children:entry.location}),/*#__PURE__*/_jsx(\"h6\",{className:\"card-subtitle mb-2 text-muted\",children:new Date(entry.date).toLocaleDateString()}),/*#__PURE__*/_jsx(\"p\",{className:\"card-text\",children:entry.description}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"h6\",{children:\"Tags:\"}),/*#__PURE__*/_jsx(TagList,{tags:entry.tags}),/*#__PURE__*/_jsx(TagInput,{entryId:entry.id,onTagAdded:handleTagAdded})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between align-items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Link,{to:`/entries/edit/${entry.id}`,className:\"btn btn-primary me-2\",children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleDeleteEntry,className:\"btn btn-danger me-2\",children:\"Delete\"})]}),/*#__PURE__*/_jsx(Link,{to:\"/\",className:\"btn btn-secondary\",children:\"Back to Home\"})]})]})});}export default EntryDetail;","map":{"version":3,"names":["React","useState","useEffect","Link","useHistory","getEntry","deleteEntry","TagList","TagInput","jsx","_jsx","jsxs","_jsxs","EntryDetail","_ref","entryId","entry","setEntry","id","location","date","description","tags","isLoading","setIsLoading","error","setError","history","fetchEntry","response","data","console","handleTagAdded","newTag","prevEntry","handleDeleteEntry","window","confirm","push","className","children","Date","toLocaleDateString","onTagAdded","to","onClick"],"sources":["/home/code-iddih/Music/client/src/components/EntryDetail.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport { getEntry, deleteEntry } from \"../utils/api\";\nimport TagList from \"./TagList\";\nimport TagInput from \"./TagInput\";\n\nfunction EntryDetail({ entryId }) {\n  const [entry, setEntry] = useState({\n    id: null,\n    location: \"\",\n    date: \"\",\n    description: \"\",\n    tags: [], // Initialize as an empty array\n  });\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const history = useHistory();\n\n  useEffect(() => {\n    const fetchEntry = async () => {\n      try {\n        setIsLoading(true);\n        const response = await getEntry(entryId);\n        setEntry(response.data);\n        setError(null);\n      } catch (error) {\n        console.error(\"Error fetching entry:\", error);\n        setError(\"Failed to load entry. Please try again.\");\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    fetchEntry();\n  }, [entryId]);\n\n  const handleTagAdded = (newTag) => {\n    setEntry((prevEntry) => ({\n      ...prevEntry,\n      tags: prevEntry.tags ? [...prevEntry.tags, newTag] : [newTag], \n    }));\n  };\n\n  const handleDeleteEntry = async () => {\n    if (window.confirm(\"Are you sure you want to delete this entry?\")) {\n      try {\n        await deleteEntry(entry.id);\n        history.push(\"/\");\n      } catch (error) {\n        console.error(\"Error deleting entry:\", error);\n        setError(\"Failed to delete entry. Please try again.\");\n      }\n    }\n  };\n\n  if (isLoading) return <div className=\"text-center\">Loading...</div>;\n  if (error) return <div className=\"alert alert-danger\">{error}</div>;\n  if (!entry) return <div className=\"alert alert-warning\">Entry not found.</div>;\n\n  return (\n    <div className=\"card\">\n      <div className=\"card-body\">\n        <h5 className=\"card-title\">{entry.location}</h5>\n        <h6 className=\"card-subtitle mb-2 text-muted\">\n          {new Date(entry.date).toLocaleDateString()}\n        </h6>\n        <p className=\"card-text\">{entry.description}</p>\n        <div className=\"mb-3\">\n          <h6>Tags:</h6>\n          <TagList tags={entry.tags} />\n          <TagInput entryId={entry.id} onTagAdded={handleTagAdded} />\n        </div>\n        <div className=\"d-flex justify-content-between align-items-center\">\n          <div>\n            <Link\n              to={`/entries/edit/${entry.id}`}\n              className=\"btn btn-primary me-2\"\n            >\n              Edit\n            </Link>\n            <button onClick={handleDeleteEntry} className=\"btn btn-danger me-2\">\n              Delete\n            </button>\n          </div>\n          <Link to=\"/\" className=\"btn btn-secondary\">\n            Back to Home\n          </Link>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default EntryDetail;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}