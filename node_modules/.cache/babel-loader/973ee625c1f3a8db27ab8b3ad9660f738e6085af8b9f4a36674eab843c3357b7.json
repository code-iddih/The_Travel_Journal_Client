{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{getUserProfile,updateUserProfile}from\"../utils/api\";import{Link}from\"react-router-dom\";import'./ProfilePage.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function ProfilePage(){const[profile,setProfile]=useState(null);const[username,setUsername]=useState(\"\");const[showModal,setShowModal]=useState(false);const[isEditing,setIsEditing]=useState(false);useEffect(()=>{const fetchProfile=async()=>{try{const response=await getUserProfile();setProfile(response.data);setUsername(response.data.username);}catch(error){console.error(\"Error fetching user profile:\",error);}};fetchProfile();},[]);const handleSave=async()=>{try{await updateUserProfile({username});setProfile(prevProfile=>({...prevProfile,username}));setShowModal(true);setIsEditing(false);}catch(error){console.error(\"Error updating user profile:\",error);}};const handleCloseModal=()=>{setShowModal(false);};if(!profile)return/*#__PURE__*/_jsx(\"div\",{className:\"text-center\",children:\"Loading...\"});return/*#__PURE__*/_jsxs(\"div\",{className:\"container my-5\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-center mb-4\",children:\"User Profile\"}),/*#__PURE__*/_jsx(\"div\",{className:\"card shadow\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"profile-picture mb-3\",children:/*#__PURE__*/_jsx(\"div\",{className:\"rounded-circle\",style:{width:\"100px\",height:\"100px\",backgroundColor:\"#ccc\",display:\"flex\",alignItems:\"center\",justifyContent:\"center\",margin:\"0 auto\"},children:/*#__PURE__*/_jsx(\"span\",{style:{fontSize:\"24px\",color:\"#fff\"},children:\"\\uD83D\\uDC64\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center justify-content-center mb-3\",children:[isEditing?/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:username,onChange:e=>setUsername(e.target.value),className:\"form-control text-center me-2\",style:{border:\"none\",fontSize:\"1.5rem\",textAlign:\"center\",marginRight:\"2px\"}}):/*#__PURE__*/_jsx(\"h5\",{className:\"card-title\",children:username}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setIsEditing(!isEditing),className:\"btn btn-light\",style:{border:\"none\",backgroundColor:\"transparent\"},children:/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",width:\"24\",height:\"24\",fill:\"currentColor\",className:\"bi bi-pencil\",viewBox:\"0 0 16 16\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M12.146.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1 0 .708l-1.5 1.5a.5.5 0 0 1-.708 0L10.646 2.854l-1.5-1.5 3-3zM9.5 1.5L11 3l-1 1-1.5-1.5L9.5 1.5zM1 14.5V16h1.5l8.5-8.5-1.5-1.5L1 14.5z\"})})})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"card-text\",style:{color:\"blue\"},children:[\"Email: \",/*#__PURE__*/_jsx(\"span\",{style:{color:\"black\"},children:profile.email})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"card-text\",style:{color:\"blue\"},children:[\"Joined: \",/*#__PURE__*/_jsx(\"span\",{style:{color:\"black\"},children:new Date(profile.joined).toLocaleDateString()})]}),isEditing&&/*#__PURE__*/_jsx(\"button\",{onClick:handleSave,className:\"btn btn-success me-2\",children:\"Save\"}),/*#__PURE__*/_jsx(Link,{to:\"/reset-password\",className:\"btn btn-primary\",children:\"Reset Password\"})]})}),showModal&&/*#__PURE__*/_jsx(\"div\",{className:\"modal\",style:modalStyle,children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",style:{width:'300px'},children:[/*#__PURE__*/_jsx(\"span\",{className:\"close\",onClick:handleCloseModal,children:\"\\xD7\"}),/*#__PURE__*/_jsx(\"h2\",{style:{color:\"green\"},children:\"Success!\"}),/*#__PURE__*/_jsx(\"p\",{style:{color:\"green\"},children:\"Your username has been updated successfully! \\u2705\"})]})})]});}// Modal styles\nconst modalStyle={position:\"fixed\",zIndex:1000,left:0,top:0,width:\"100%\",height:\"100%\",backgroundColor:\"rgba(0, 0, 0, 0.5)\",display:\"flex\",alignItems:\"center\",justifyContent:\"center\"};export default ProfilePage;","map":{"version":3,"names":["React","useState","useEffect","getUserProfile","updateUserProfile","Link","jsx","_jsx","jsxs","_jsxs","ProfilePage","profile","setProfile","username","setUsername","showModal","setShowModal","isEditing","setIsEditing","fetchProfile","response","data","error","console","handleSave","prevProfile","handleCloseModal","className","children","style","width","height","backgroundColor","display","alignItems","justifyContent","margin","fontSize","color","type","value","onChange","e","target","border","textAlign","marginRight","onClick","xmlns","fill","viewBox","d","email","Date","joined","toLocaleDateString","to","modalStyle","position","zIndex","left","top"],"sources":["/home/code-iddih/Music/client/src/pages/ProfilePage.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { getUserProfile, updateUserProfile } from \"../utils/api\";\nimport { Link } from \"react-router-dom\";\nimport './ProfilePage.css';\n\nfunction ProfilePage() {\n  const [profile, setProfile] = useState(null);\n  const [username, setUsername] = useState(\"\");\n  const [showModal, setShowModal] = useState(false);\n  const [isEditing, setIsEditing] = useState(false);\n\n  useEffect(() => {\n    const fetchProfile = async () => {\n      try {\n        const response = await getUserProfile();\n        setProfile(response.data);\n        setUsername(response.data.username);\n      } catch (error) {\n        console.error(\"Error fetching user profile:\", error);\n      }\n    };\n\n    fetchProfile();\n  }, []);\n\n  const handleSave = async () => {\n    try {\n      await updateUserProfile({ username });\n      setProfile((prevProfile) => ({ ...prevProfile, username }));\n      setShowModal(true);\n      setIsEditing(false);\n    } catch (error) {\n      console.error(\"Error updating user profile:\", error);\n    }\n  };\n\n  const handleCloseModal = () => {\n    setShowModal(false);\n  };\n\n  if (!profile) return <div className=\"text-center\">Loading...</div>;\n\n  return (\n    <div className=\"container my-5\">\n      <h1 className=\"text-center mb-4\">User Profile</h1>\n      <div className=\"card shadow\">\n        <div className=\"card-body text-center\">\n          <div className=\"profile-picture mb-3\">\n            <div\n              className=\"rounded-circle\"\n              style={{\n                width: \"100px\",\n                height: \"100px\",\n                backgroundColor: \"#ccc\",\n                display: \"flex\",\n                alignItems: \"center\",\n                justifyContent: \"center\",\n                margin: \"0 auto\",\n              }}\n            >\n              <span style={{ fontSize: \"24px\", color: \"#fff\" }}>ðŸ‘¤</span>\n            </div>\n          </div>\n          <div className=\"d-flex align-items-center justify-content-center mb-3\">\n            {isEditing ? (\n              <input\n                type=\"text\"\n                value={username}\n                onChange={(e) => setUsername(e.target.value)}\n                className=\"form-control text-center me-2\"\n                style={{ border: \"none\", fontSize: \"1.5rem\", textAlign: \"center\", marginRight: \"2px\" }}\n              />\n            ) : (\n              <h5 className=\"card-title\">{username}</h5>\n            )}\n            <button\n              onClick={() => setIsEditing(!isEditing)}\n              className=\"btn btn-light\"\n              style={{ border: \"none\", backgroundColor: \"transparent\" }}\n            >\n              <svg\n                xmlns=\"http://www.w3.org/2000/svg\"\n                width=\"24\"\n                height=\"24\"\n                fill=\"currentColor\"\n                className=\"bi bi-pencil\"\n                viewBox=\"0 0 16 16\"\n              >\n                <path d=\"M12.146.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1 0 .708l-1.5 1.5a.5.5 0 0 1-.708 0L10.646 2.854l-1.5-1.5 3-3zM9.5 1.5L11 3l-1 1-1.5-1.5L9.5 1.5zM1 14.5V16h1.5l8.5-8.5-1.5-1.5L1 14.5z\"/>\n              </svg>\n            </button>\n          </div>\n          <p className=\"card-text\" style={{ color: \"blue\" }}>\n            Email: <span style={{ color: \"black\" }}>{profile.email}</span>\n          </p>\n          <p className=\"card-text\" style={{ color: \"blue\" }}>\n            Joined: <span style={{ color: \"black\" }}>{new Date(profile.joined).toLocaleDateString()}</span>\n          </p>\n          {isEditing && (\n            <button onClick={handleSave} className=\"btn btn-success me-2\">\n              Save\n            </button>\n          )}\n          <Link to=\"/reset-password\" className=\"btn btn-primary\">\n            Reset Password\n          </Link>\n        </div>\n      </div>\n\n      {/* Success Modal */}\n      {showModal && (\n        <div className=\"modal\" style={modalStyle}>\n          <div className=\"modal-content\" style={{ width: '300px' }}>\n            <span className=\"close\" onClick={handleCloseModal}>&times;</span>\n            <h2 style={{ color: \"green\" }}>Success!</h2>\n            <p style={{ color: \"green\" }}>Your username has been updated successfully! âœ…</p>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n\n// Modal styles\nconst modalStyle = {\n  position: \"fixed\",\n  zIndex: 1000,\n  left: 0,\n  top: 0,\n  width: \"100%\",\n  height: \"100%\",\n  backgroundColor: \"rgba(0, 0, 0, 0.5)\",\n  display: \"flex\",\n  alignItems: \"center\",\n  justifyContent: \"center\",\n};\n\nexport default ProfilePage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}