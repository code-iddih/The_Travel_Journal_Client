{"ast":null,"code":"var _jsxFileName = \"/home/code-iddih/Documents/projects/The Travel Journal/client/src/pages/EntryDetailPage.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport EntryDetail from \"../components/EntryDetail\";\nimport PhotoUpload from \"../components/PhotoUpload\";\nimport { getEntry, getEntryPhotos, deletePhoto } from \"../utils/api\"; // import deletePhoto\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction EntryDetailPage() {\n  _s();\n  const {\n    id\n  } = useParams();\n  const [entry, setEntry] = useState(null);\n  const [photos, setPhotos] = useState([]);\n  useEffect(() => {\n    const fetchEntryAndPhotos = async () => {\n      try {\n        const [entryResponse, photosResponse] = await Promise.all([getEntry(id), getEntryPhotos(id)]);\n        setEntry(entryResponse.data);\n        setPhotos(photosResponse.data);\n      } catch (error) {\n        console.error(\"Error fetching entry and photos:\", error);\n      }\n    };\n    fetchEntryAndPhotos();\n  }, [id]);\n  const handlePhotoUploaded = newPhoto => {\n    setPhotos([...photos, newPhoto]);\n  };\n\n  // Function to handle deleting a photo\n  const handleDeletePhoto = async photoId => {\n    try {\n      await deletePhoto(id, photoId); // Call API to delete photo\n      setPhotos(photos.filter(photo => photo.id !== photoId)); // Update state after deletion\n    } catch (error) {\n      console.error(\"Error deleting photo:\", error);\n    }\n  };\n  if (!entry) return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"Loading...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 42,\n    columnNumber: 22\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"mt-4\",\n      children: \"Photos\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row\",\n      children: photos.map(photo => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-md-4 mb-4\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card\",\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: photo.url,\n            className: \"card-img-top\",\n            alt: photo.description || \"Photo\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 51,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card-body\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"card-text\",\n              children: photo.description\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 57,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn btn-danger\",\n              onClick: () => handleDeletePhoto(photo.id),\n              children: \"Delete Photo\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 59,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 56,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 13\n        }, this)\n      }, photo.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(EntryDetail, {\n      entryId: id\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(PhotoUpload, {\n      entryId: entry.id,\n      onPhotoUploaded: handlePhotoUploaded\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 45,\n    columnNumber: 5\n  }, this);\n}\n_s(EntryDetailPage, \"+IplN8W4hRXtHbvGPNeKrGFz5Bo=\", false, function () {\n  return [useParams];\n});\n_c = EntryDetailPage;\nexport default EntryDetailPage;\nvar _c;\n$RefreshReg$(_c, \"EntryDetailPage\");","map":{"version":3,"names":["React","useState","useEffect","useParams","EntryDetail","PhotoUpload","getEntry","getEntryPhotos","deletePhoto","jsxDEV","_jsxDEV","EntryDetailPage","_s","id","entry","setEntry","photos","setPhotos","fetchEntryAndPhotos","entryResponse","photosResponse","Promise","all","data","error","console","handlePhotoUploaded","newPhoto","handleDeletePhoto","photoId","filter","photo","children","fileName","_jsxFileName","lineNumber","columnNumber","className","map","src","url","alt","description","onClick","entryId","onPhotoUploaded","_c","$RefreshReg$"],"sources":["/home/code-iddih/Documents/projects/The Travel Journal/client/src/pages/EntryDetailPage.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport EntryDetail from \"../components/EntryDetail\";\nimport PhotoUpload from \"../components/PhotoUpload\";\nimport { getEntry, getEntryPhotos, deletePhoto } from \"../utils/api\"; // import deletePhoto\n\nfunction EntryDetailPage() {\n  const { id } = useParams();\n  const [entry, setEntry] = useState(null);\n  const [photos, setPhotos] = useState([]);\n\n  useEffect(() => {\n    const fetchEntryAndPhotos = async () => {\n      try {\n        const [entryResponse, photosResponse] = await Promise.all([\n          getEntry(id),\n          getEntryPhotos(id),\n        ]);\n        setEntry(entryResponse.data);\n        setPhotos(photosResponse.data);\n      } catch (error) {\n        console.error(\"Error fetching entry and photos:\", error);\n      }\n    };\n    fetchEntryAndPhotos();\n  }, [id]);\n\n  const handlePhotoUploaded = (newPhoto) => {\n    setPhotos([...photos, newPhoto]);\n  };\n\n  // Function to handle deleting a photo\n  const handleDeletePhoto = async (photoId) => {\n    try {\n      await deletePhoto(id, photoId); // Call API to delete photo\n      setPhotos(photos.filter((photo) => photo.id !== photoId)); // Update state after deletion\n    } catch (error) {\n      console.error(\"Error deleting photo:\", error);\n    }\n  };\n\n  if (!entry) return <div>Loading...</div>;\n\n  return (\n    <div>\n      <h2 className=\"mt-4\">Photos</h2>\n      <div className=\"row\">\n        {photos.map((photo) => (\n          <div key={photo.id} className=\"col-md-4 mb-4\">\n            <div className=\"card\">\n              <img\n                src={photo.url}\n                className=\"card-img-top\"\n                alt={photo.description || \"Photo\"}\n              />\n              <div className=\"card-body\">\n                <p className=\"card-text\">{photo.description}</p>\n                {/* Delete Button */}\n                <button\n                  className=\"btn btn-danger\"\n                  onClick={() => handleDeletePhoto(photo.id)}\n                >\n                  Delete Photo\n                </button>\n              </div>\n            </div>\n          </div>\n        ))}\n      </div>\n      <EntryDetail entryId={id} />\n      <PhotoUpload entryId={entry.id} onPhotoUploaded={handlePhotoUploaded} />\n    </div>\n  );\n}\n\nexport default EntryDetailPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}